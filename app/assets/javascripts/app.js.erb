angular.module('ngtest', ['ui.router'])
    .config([
      '$stateProvider',
      '$urlRouterProvider',
      function ($stateProvider, $urlRouterProvider) {
        $urlRouterProvider.otherwise('home');

        $stateProvider
            .state('home', {
              url: '/home',
              templateUrl: '<%= asset_path('home/_home.html') %>',
              controller: 'MainCtrl',
              resolve: {
                postPromise: ['posts', function (posts) {
                  return posts.getAll();
                }]
              }
            })
            .state('posts', {
              url: '/posts/{id}',
              templateUrl: '<%= asset_path('posts/_posts.html') %>',
              controller: 'PostsCtrl'
            });
      }
    ]);
